/*! fisdap 2016-01-26 */
caseStudyApp.controller("profileCtl",["$scope","$http","$location","SelectionService",function($scope,$http,$location,SelectionService){$scope.selectionService=SelectionService,$scope.userId=$scope.selectionService.getUser(),$scope.userData=$scope.selectionService.getUserList(),$scope.user,$scope.username,$scope.phonenumber,$scope.email,$scope.website,$scope.street,$scope.suite,$scope.city,$scope.company,$scope.bs,$scope.phrase;for(var i=0;i<$scope.userData.length;i++)$scope.userData[i].id===$scope.userId&&($scope.user=$scope.userData[i].name,$scope.username=$scope.userData[i].username,$scope.phonenumber=$scope.userData[i].phone,$scope.email=$scope.userData[i].email,$scope.website=$scope.userData[i].website,$scope.street=$scope.userData[i].address.street,$scope.suite=$scope.userData[i].address.suite,$scope.city=$scope.userData[i].address.city,$scope.company=$scope.userData[i].company.name,$scope.bs=$scope.userData[i].company.bs,$scope.phrase=$scope.userData[i].company.catchPhrase)}]),caseStudyApp.controller("userCtl",["$scope","$http","$location","SelectionService",function($scope,$http,$location,SelectionService){console.log("You are in user controller"),$scope.users=[],$scope.selectedUser,$scope.selectionService=SelectionService,$scope.hideGrid=!0,$scope.selectionService.setUserList(),$scope.getUsers=function(){$http.get("http://jsonplaceholder.typicode.com/users").then(function(response){$scope.gridOptions.data=response.data,$scope.hideGrid=!1})},$scope.getUsers(),console.log("These are the users ",$scope.users);var nameTemplate='<div class="ui-grid-cell-contents select-name" ng-click="grid.appScope.selectUser(row.entity.id)">{{row.entity.name}}';$scope.gridOptions={enableSorting:!0,rowEditWaitInterval:500,columnDefs:[{name:"id",field:"id",enableCellEdit:!1},{name:"Name",field:"name",enableCellEdit:!1,cellTemplate:nameTemplate},{name:"Username",field:"username",enableCellEdit:!1},{name:"Phone",field:"phone",enableCellEdit:!1,cellFilter:"tel"},{name:"Company",field:"company.name",enableCellEdit:!1}]},$scope.selectUser=function(id){$scope.selectedUser=id,$scope.selectionService.setUser(id),$location.path("/tasks")}}]),caseStudyApp.controller("taskCtl",["$scope","$http","$location","SelectionService","$mdDialog","$mdMedia",function($scope,$http,$location,SelectionService,$mdDialog,$mdMedia){function DialogController($scope,$mdDialog){$scope.hide=function(){$mdDialog.hide()},$scope.cancel=function(){$mdDialog.cancel()},$scope.answer=function(answer){$mdDialog.hide(answer)}}$scope.selectionService=SelectionService,$scope.selectedUser=$scope.selectionService.getUser(),$scope.userTasks=[],$scope.newTask={},$scope.customFullscreen=$mdMedia("xs")||$mdMedia("sm"),$scope.missing=!1,$scope.getTasks=function(){var tasks=void 0;$http.get("http://jsonplaceholder.typicode.com/user/1/todos").then(function(response){tasks=response.data;for(var i=0;i<tasks.length;i++)tasks[i].userId==$scope.selectedUser&&$scope.userTasks.push(tasks[i]);void 0==$scope.userTasks[0]&&($scope.missing=!0)})},$scope.getTasks(),$scope.addTask=function(ev){var useFullScreen=($mdMedia("sm")||$mdMedia("xs"))&&$scope.customFullscreen;$mdDialog.show({controller:DialogController,templateUrl:"/views/newtask.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!0,fullscreen:useFullScreen}).then(function(answer){console.log("This is answer",answer);for(var taskArray=[],newId=void 0,i=0;i<$scope.userTasks.length;i++)taskArray.push($scope.userTasks[i].id);void 0==$scope.userTasks[0]?(newId=1,$scope.missing=!1):newId=Math.max.apply(null,taskArray)+1,$scope.newTask.userId=$scope.selectedUser,$scope.newTask.id=newId,$scope.newTask.title=answer,$scope.newTask.completed=!1,$scope.userTasks.push($scope.newTask),$scope.newTask={}},function(){alert("You did not enter a task.")}),$scope.$watch(function(){return $mdMedia("xs")||$mdMedia("sm")},function(wantsFullScreen){$scope.customFullscreen=wantsFullScreen===!0})},$scope.deleteTask=function(id){for(var i=0;i<$scope.userTasks.length;i++){if($scope.userTasks[i].id===id){$scope.userTasks.splice(i,1);for(var i=0;i<$scope.userTasks.length;i++)$scope.userTasks[i].id=i+1}else console.log("Delete error.");void 0==$scope.userTasks[0]&&($scope.missing=!0)}}}]);